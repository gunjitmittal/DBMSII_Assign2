{% import "bootstrap/wtf.html" as wtf %}

{% include "header.html" %}
  <!-- Page Header -->
  <header class="masthead" style="background-image: url('{{ url_for('static', filename='img/edit-bg.jpg')}}')">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="page-heading">
            {% if is_edit: %}
            <h1>Edit Post</h1>
            {% else: %}
            <h1>New Post</h1>
            {% endif %}
            <span class="subheading">You're going to make a great blog post!</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        {{ ckeditor.load() }}
        <!--{{ ckeditor.config(name='body') }}-->
        <!--{{ wtf.quick_form(form, novalidate=True, button_map={"submit": "primary"}) }}-->
        <form >
          <div class='form-group'>
            {{ form.title.label }} {{ form.title(class="form-control") }}
          </div>
          <div class="form-group">
              {{ form.tags.label }} {{ form.tags(class="form-control") }}
          </div>
          <div class='form-group'> 
            {{ form.body(class="form-control") }}
          </div>
          <div class="form-group btn-primary" style='display:inline-block'>
              {{ form.submit(class="btn ") }}
          </div>
        </form>
      </div>
    </div>
  </div>
  <script>
    $(function(){
      var defaultOpts = {
        keyLimit: 1,
        hide:false,
        freeInput:false,
        freeEdit:false,
      };
      $("#tag_autocomplete").tagComplete({ 	 	autocomplete:{ajaxOpts:{
          
        url: "{{url_for('tagcomplete')}}",
        },
        params: function(value){
          
          return {q:value};
        },
        proccessData: function(data){

          //return the data
          console.log(data);
         return data.matching_results;
      }//end proccess ajax data,
      
  
    }//end auto complete 
     });
     
  });
    </script>
{% include "footer.html" %}